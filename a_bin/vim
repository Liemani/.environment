#!/bin/bash

# vim a_command

if [ $# -ne 1 ]; then
  echo 'usage : vim <a_command>'
  exit 1
fi

found=false

for p in $(echo $A_PATH | tr ':' '\n'); do
  if [ -x "$p/$1" ]; then
    cd $p
    vim "$p/$1"
    found=true
    break
  fi
done

if [ "$found" = false ]; then
  {
    printf '#!/bin/bash\n'
    printf '\n'
    printf '\n'
  } > "$private_a_bin/$1"
  chmod +x "$private_a_bin/$1"

  cd $private_a_bin
  vim "$private_a_bin/$1"
fi
